---
apiVersion: v1
kind: Pod
Namespace: "{{ kind.namespace | default(omit) }}"
metadata:
  name: "{{ kind.Pod.name | default(omit) }}"
spec:
{% if kind.initContainers is defined %}
  initContainers:
  {% for initContainer in kind.initContainers | default([], true) %}
    {%- if initContainer.image is defined %}    - image: {% endif %}{{ initContainer.image | default('') }}
    {% if initContainer.name is defined %}      name: {% endif %}{{ initContainer.name | default('') }}
    {% if initContainer.command is defined %}      command: [{% endif %}{{ initContainer.command | default('') }}{% if initContainer.command is defined %}]{% endif %}
    {% if initContainer.workingDir is defined %}      workingDir: "{% endif %}{{ initContainer.workingDir | default('') }}{% if initContainer.workingDir is defined %}"{% endif %}

    {% if initContainer.env is defined %}
          env:
    {% for env in initContainer.env | default([], true) %}
            - {% if env.name is defined %}name: {% endif %}{{ env.name | default('') }}
              {% if env.value is defined %}value: {% endif %}{{ env.value | default('') }}
    {% endfor %}
    {% endif %}
  {% endfor %}
{% endif %}
{%- if kind.container is defined %}
  containers:

{% for container in kind.containers | default([], true) %}
{% if container.image is defined %}    - image: {% endif %}{{ container.image | default('') }}
{% if container.name is defined %}      name: {% endif %}{{ container.name | default('') }}
{% if container.command is defined %}      command: [{% endif %}{{ container.command | default('') }}{% if container.command is defined %}]{% endif %}
{% if container.workingDir is defined %}      workingDir: "{% endif %}{{ container.workingDir | default('') }}{% if container.workingDir is defined %}"{% endif %}

{% if container.env is defined %}
      env:
{% for env in container.env | default([], true) %}
        - {% if env.name is defined %}name: {% endif %}{{ env.name | default('') }}
          {% if env.value is defined %}value: {% endif %}{{ env.value | default('') }}
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}
{%- if kind.volumes is defined %}
  volumes:

  {% for volume in kind.volumes | default([], true) %}
    {%- if volume.name is defined %}    - name: {% endif %}{{ volume.name | default('') }}
    {%- if volume.persistentVolumeClaim is defined %}

    persistentVolumeClaim:
      {% if volume.persistentVolumeClaim.claimName is defined %}   claimName: {% endif %}{{ volume.persistentVolumeClaim.claimName | default('') }}
    {% endif %}
  {% endfor %}
{% endif %}


...
