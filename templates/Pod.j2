---
apiVersion: v1
kind: Pod
Namespace: "{{ kind.namespace | default(omit) }}"
metadata:
  name: "{{ kind.Pod.name | default(omit) }}"
spec:
{% if kind.initContainers is defined %}
  initContainers:
{% for initContainer in kind.initContainers | default([], true) %}
{% if initContainer.image is defined %}    - image: {% endif %}{{ initContainer.image | default('') }}
{% if initContainer.name is defined %}      name: {% endif %}{{ initContainer.name | default('') }}
{% if initContainer.command is defined %}      command: "{% endif %}{{ initContainer.command | default('') }}{% if initContainer.command is defined %}"{% endif %}
{% if initContainer.workingDir is defined %}      workingDir: "{% endif %}{{ initContainer.workingDir | default('') }}{% if initContainer.workingDir is defined %}"{% endif %}

{% if initContainer.env is defined %}
      env:
{% for env in initContainer.env | default([], true) %}
        - {% if env.name is defined %}name: {% endif %}{{ initContainer.name | default('') }}
          {% if env.value is defined %}value: {% endif %}{{ initContainer.image | default('') }}
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}

...
